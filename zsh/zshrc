echo Zsh v$ZSH_VERSION

if [ $TILIX_ID ] || [ $VTE_VERSION ]; then
    source /etc/profile.d/vte.sh
fi

# Setup terminal, and turn on colors
export TERM="xterm-256color"
export GREP_COLOR='3;33'

export DEFAULT_USER="$USER"
export ARCHFLAGS='-arch x86_64'

export LESS='--ignore-case --raw-control-chars'
export PAGER='less'
export EDITOR='leafpad'

# Virtual Environment Stuff
VIRTUALENVWRAPPER_PYTHON='/usr/bin/python3'
export PROJECT_HOME=$HOME/code/personal
export WORKON_HOME=$HOME/.virtualenvs
export VIRTUALENVWRAPPER_SCRIPT=/usr/local/bin/virtualenvwrapper.sh
source /usr/local/bin/virtualenvwrapper.sh

# Node
#export NVM_NO_USE=true #stop NVM from using default node version on load

#Zsh history settings
source ~/dotfiles/zsh/config/history.zsh
source ~/dotfiles/zsh/config/setopt.zsh
source ~/dotfiles/zsh/config/completions.zsh
source ~/dotfiles/zsh/config/bindkeys.zsh
source ~/dotfiles/zsh/config/aliases.zsh

# Useful functions
source ~/dotfiles/zsh/config/functions.zsh

# Check if zplug is installed
if [[ ! -d ~/.zplug ]]; then
  git clone https://github.com/zplug/zplug ~/.zplug
  source ~/.zplug/init.zsh && zplug update --self
fi

# load zplug 
source ~/.zplug/init.zsh

# setup theme
source ~/dotfiles/zsh/config/theme.zsh
zplug "bhilburn/powerlevel9k", use:powerlevel9k.zsh-theme

zplug "zplug/zplug"

# git
#zplug "plugins/git", from:oh-my-zsh,  as:command, defer:2
#zplug "cunixorn/git-extra-commands", as:command
#zplug "peterhurford/git-aliases"

# python
zplug "plugins/pip", from:oh-my-zsh, as:command, ignore: oh-my-zsh
zplug "srijanshetty/zsh-pip-completion"
zplug "plugins/python", from:oh-my-zsh, as:command, ignore: oh-my-zsh
#zplug "virtualenv", from:oh-my-zsh, as:command, ignore: oh-my-zsh
#zplug "MichaelAquilina/zsh-autoswitch-virtualenv"

# nodejs
zplug "lukechilds/zsh-nvm"
zplug "lukechilds/zsh-better-npm-completion"
zplug "tomsquest/nvm-auto-use.zsh"

# other awesome stuff
#zplug "trapd00r/LS_COLORS"
#eval $( dircolors -b $HOME/.zplug/repos/trapd00r/LS_COLORS/LS_COLORS)
zplug "chrissicool/zsh-256color"
zplug "plugins/command-not-found", from:oh-my-zsh, as:plugin, ignore: oh-my-zsh
zplug "zsh-users/zsh-syntax-highlighting", defer:3
#zplug "trapd00r/zsh-syntax-highlighting-filetypes", defer:4


zplug "zsh-users/zsh-completions"
export ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=7'
zplug "zsh-users/zsh-autosuggestions"
zplug "djui/alias-tips"

#live search (peco)
#zplug "peco/peco",    from:gh-r,    as:command,    use: "linux_amd64.tar.gz" rename-to:peco
zplug "junegunn/fzf-bin", \
    from:gh-r, \
    as:command, \
    use:"*linux*amd64*", \
    rename-to:fzf
#zplug "jimeh/zsh-peco-history"

# better cd
zplug "knu/z"

# better ls
zplug "supercrabtree/k"

# install uninstalled plugins
zplug check || zplug install

# Then, source plugins and add commands to $PATH
zplug load

# Get more plugins from https://github.com/unixorn/awesome-zsh-plugins


# Environment Settings

#source ~/dotfiles/zsh/config/exports.zsh

xrandr --setprovideroffloadsink 1 0

export PATH=$PATH:/usr/local/go/bin
export GOPATH=$(go env GOPATH)

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm

export PATH=$PATH:~/apps


# profit
#[[ $SHLVL != "2" ]] && tmux new

export PATH="$HOME/.yarn/bin:$PATH"

#export STAGING_DIR=/home/jeff/code/cybercar/LMU5530/sdk-prec/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/bin
export STAGING_DIR=/home/jeff/code/openwrt/staging_dir/toolchain-arm_mpcore+vfp_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/bin
export PROTO_SRC=/home/jeff/code/pilot/prototype
export STP_SRC=/home/jeff/code/cybercar/linux
